{"version":3,"file":"../index.js","sources":["index.coffee"],"names":[],"mappings":"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","sourcesContent":["form = document.getElementById 'contactForm'\r\nnameField = document.getElementById 'name'\r\nemailField = document.getElementById 'email'\r\nsubmitBtn = document.getElementById 'submitBtn'\r\nsubmitBtnRegularText = document.getElementById 'submitBtnRegularText'\r\nsubmitBtnSubmittingText = document.getElementById 'submitBtnSubmittingText'\r\n\r\nerrorMessage = document.getElementById 'errorMessage'\r\n\r\nsetError = (message)->\r\n\tconsole.log 'setting error', message, errorMessage\r\n\terrorMessage.innerHTML = message\r\n\tif message\r\n\t\terrorMessage.classList.remove 'hide'\r\n\telse\r\n\t\terrorMessage.classList.add 'hide'\r\n\tconsole.log 'error set', errorMessage.classList.contains('hide')\r\n\t\t\r\n\r\ntoggleClass = (el, cls)->\r\n\tif el.classList.contains cls\r\n\t\tel.classList.remove cls\r\n\telse\r\n\t\tel.classList.add cls\r\n\t\t\r\ntoggleSubmitButtonEnabled = ->\r\n\ttoggleClass(submitBtnRegularText, 'hide')\r\n\ttoggleClass(submitBtnSubmittingText, 'hide')\r\n\ttoggleClass(submitBtn, 'btn-success')\r\n\ttoggleClass(submitBtn, 'btn-light')\r\n\tsubmitBtn.disabled = !submitBtn.disabled\r\n\r\nfieldIsValid = (field)->\r\n\tif field.value.length is 0\r\n\t\tfield.classList.add 'is-invalid'\r\n\t\treturn false\r\n\telse\r\n\t\tfield.classList.remove 'is-invalid'\r\n\t\treturn true\r\n\r\napi =\r\n\tbase_uri: 'https://dbw05.atrcc.com/FM17_Data_API_demo-middleman/public/index.php'\r\n\r\napp =\r\n\tproject: 'FM17_REST_DEMO'\r\n\tenvironment: 'DEV-LOCAL'\r\n\tversion: 'v1.0.0'\r\n\r\ncontact =\r\n\tname:\r\n\t\tfirst: ''\r\n\t\tlast: ''\r\n\t\tset: (nameField)->\r\n\t\t\tnameArr = nameField.value.split ' '\r\n\t\t\tif nameArr.length > 1\r\n\t\t\t\tthis.last = nameArr.splice(-1).join()\r\n\t\t\tthis.first = nameArr.join ' '\r\n\temail: ''\r\n\tadd: ->\r\n\t\tpayload = \r\n\t\t\t\"name_first\": this.name.first\r\n\t\t\t\"name_last\": this.name.last\r\n\t\t\t\"email\": this.email\r\n\t\t\r\n\t\tpayloadStr = JSON.stringify payload\r\n\r\n\t\tp = fetch api.base_uri + '/contacts',\r\n\t\t\t\tmethod: 'POST'\r\n\t\t\t\theaders: new Headers([\r\n\t\t\t\t\t['Content-Type', 'application/json']\r\n\t\t\t\t\t['X-RCC-PROJECT', app.project ]\r\n\t\t\t\t\t['X-RCC-ENVIRONMENT', app.environment ]\r\n\t\t\t\t\t['X-RCC-VERSION', app.version ]\r\n\t\t\t\t])\r\n\t\t\t\tbody: payloadStr\r\n\t\t\t\tcache: 'no-cache'\r\n\t\treturn p\r\n\r\nonSubmit = (event)->\r\n\tnameValid = fieldIsValid(nameField)\r\n\temailValid = fieldIsValid(emailField)\r\n\r\n\tif not nameValid or not emailValid\r\n\t\tif event\r\n\t\t\tevent.preventDefault()\r\n\t\treturn false\r\n\r\n\ttoggleSubmitButtonEnabled()\r\n\r\n\t# prep the entered data\r\n\tcontact.email = emailField.value\r\n\tcontact.name.set nameField\r\n\r\n\t# Do ajaxy stuff\r\n\tcontact.add()\r\n\t\t.then((response)->\r\n\t\t\tif not response.ok\r\n\t\t\t\tthrow Error response.status + ' ' + response.statusText\r\n\t\t\treturn response\r\n\t\t)\r\n\t\t.then((response)->\r\n\t\t\twindow.location = './thanks.html'\r\n\t\t)\r\n\t\t.catch((error)->\r\n\t\t\tconsole.log 'error', error\r\n\t\t\ttoggleSubmitButtonEnabled()\r\n\t\t\tsetError error\r\n\t\t)\r\n\tif event\r\n\t\tevent.preventDefault()\r\n\treturn false\r\n\r\nform.addEventListener 'submit', onSubmit, false"]}